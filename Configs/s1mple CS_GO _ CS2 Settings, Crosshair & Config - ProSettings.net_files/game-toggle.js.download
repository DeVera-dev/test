var prosett=prosett||{};prosett.game_toggle={init:function(){this.register_events(),this.clone_first_game(),this.read_url()},register_events:function(){var e=document.querySelector(".games_toggles"),t=document.querySelector(".games-buttons"),s=!!t&&t.querySelector(".games_toggles");if(e){var l=e.querySelectorAll(".game");if(window.addEventListener("click",this.remove_class_open.bind(this)),l.length>1){var n=document.querySelector(".games_toggles");n.classList.remove("disabled"),n.addEventListener("click",this.toggle_class_open.bind(this))}for(var o=0;o<l.length;o++)l[o].addEventListener("click",this.game_toggle_select.bind(this))}if(s){var a=s.querySelectorAll(".game");s.classList.remove("disabled"),a[0].classList.add("selected");for(var r=0;r<a.length;r++)a[r].addEventListener("click",this.content_game_toggle_click.bind(this))}},content_game_toggle_click:function(e){for(var t=document.querySelector(".games-buttons").querySelector(".games_toggles").querySelectorAll(".game"),s=0;s<t.length;s++)t[s].classList.remove("selected");this.game_toggle_select(e)},game_toggle_select:function(e){var t=document.querySelector(".games_toggles"),s=t.querySelectorAll(".game"),l=this.parent_dom_el(e.target),n=e.target.closest(".games_toggles").parentElement.classList.contains("games-buttons");if(n)for(var o=this.parent_dom_el(e.target),a=1;a<s.length;a++){var r=s[a];r.children[0].textContent===o.children[0].textContent&&(l=r)}var i=l.cloneNode(!0);if(!l.classList.contains("selected")){t.classList.remove("open"),s[0].remove(),t.prepend(i);var c=document.querySelector(".games-buttons .games_toggles"),g=!!c&&c.querySelectorAll(".game");for(let e=0;e<g.length;e++)g[e].classList.remove("selected");for(d=0;d<s.length;d++)s[d].classList.remove("selected");if(l.classList.add("selected"),n)o.classList.add("selected");else for(var d=0;d<g.length;d++){var m=g[d];m.children[0].textContent===l.children[0].textContent&&m.classList.add("selected")}this.game_view_select(i),this.game_update_url(i);for(var _=Array.from(i.children),u=0;u<_.length;u++){var v=_[u];"H2"===v.tagName&&this.game_nav_toggle(v.innerText)}}},game_nav_toggle:function(e){for(var t=document.querySelectorAll(".toc > ol > li.game"),s=0;s<t.length;s++)t[s].childNodes[0].textContent.replace(" settings","")!==e.replace(" Settings","")?(t[s].style.display="none",t[s].childNodes[1].style.display="block"):t[s].style.display="block"},game_view_select:function(e){var t=e.classList;document.getElementById(this.first_game_id(t)+"-settings").style.display="block",document.querySelectorAll(".games>div:not(.select-wrapper):not(#"+CSS.escape(this.first_game_id(t))+"-settings)").forEach(function(e){e.style.display="none"})},clone_first_game:function(){var e=document.querySelector(".games_toggles");if(e){var t=e.querySelector(".game"),s=t.cloneNode(!0);t.classList.add("selected"),e.prepend(s)}},read_url:function(){var e=document.querySelector(".games_toggles").querySelectorAll(".game"),t=window.location.hash;if(t)for(var s=0;s<e.length;s++){var l=e[s];l.classList.value.includes(t.substring(1))&&l.click()}},game_update_url:function(e){for(var t=0;t<e.classList.length;t++){var s=e.classList[t];s.includes("--")&&(window.location.hash=`#${s.split("--").pop()}`)}},toggle_class_open:function(e){var t=e.target;t.classList.contains("games_toggles")&&t.classList.toggle("open")},remove_class_open:function(e){var t=document.querySelector(".games_toggles");t.contains(e.target)||t.classList.remove("open")},nth_parent:function(e,t){for(;t--&&e;)e=e.parentNode;return e},first_game_id:function(e){for(var t,s=0;s<e.length;s++){var l=e[s];l.indexOf("--")>=0&&(t=l.split("--").pop())}return t},parent_dom_el:function(e){var t=e;return"H2"===t.tagName?t=e.parentNode:"IMG"===t.tagName&&(t=e.parentNode.parentNode),t}},window.addEventListener("load",function(){prosett.game_toggle.init()});